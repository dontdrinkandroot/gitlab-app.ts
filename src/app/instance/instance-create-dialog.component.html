<form [formGroup]="instanceForm" (ngSubmit)="onSubmit()">
    <h2 mat-dialog-title>Create Instance</h2>
    <mat-dialog-content>
        <div class="d-flex flex-column">
            <mat-form-field floatLabel="always">
                <mat-label>Instance</mat-label>
                <input matInput type="text" formControlName="instance" [required]="true">
                <span matTextPrefix>https://</span>
            </mat-form-field>

            <mat-form-field>
                <mat-label>Token</mat-label>
                <input matInput [type]="hideToken ? 'password' : 'text'" formControlName="token" [required]="true">
                <button mat-icon-button matSuffix (click)="hideToken = !hideToken" [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hideToken">
                    <mat-icon>{{ hideToken ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
            </mat-form-field>
        </div>
    </mat-dialog-content>
    <mat-dialog-actions>
        <button mat-button (click)="dialogRef.close()" type="button">Cancel</button>
        <button mat-flat-button type="submit" [disabled]="!instanceForm.valid || (submitting$|async)">
            @if (submitting$|async) {
                <mat-spinner diameter="20"></mat-spinner>
            } @else {
                Ok
            }
        </button>
    </mat-dialog-actions>
</form>
